#!/bin/bash

user=$1
password=$2
db=$3

if [ -z "$user" ] || [ -z "$password" ] ; then
	echo "Usage: sc-add-mysql-user [user] [password] [db]";
	exit
fi

if [ -z "$db" ];then
  db="$user"
fi

#test=$(mysql --execute="SELECT * FROM mysql.user;")
mysql --execute="CREATE USER IF NOT EXISTS '${user}'@'localhost' IDENTIFIED WITH mysql_native_password BY '${password}';"
mysql --execute="CREATE DATABASE IF NOT EXISTS ${db};"
mysql --execute="GRANT ALL PRIVILEGES ON ${db}.* TO '${user}'@'localhost';"
mysql --execute="FLUSH PRIVILEGES;"

